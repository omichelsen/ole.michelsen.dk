/*
 * jQuery Countdown plugin v1.0
 * http://www.littlewebthings.com/projects/countdown/
 *
 * Copyright 2010, Vassilis Dourdounis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
(function(a){a.fn.countDown=function(d){var b={};a.extend(b,d);var c=this.setCountDown(b);b.onComplete&&a.data(a(this)[0],"callback",b.onComplete);b.omitWeeks&&a.data(a(this)[0],"omitWeeks",b.omitWeeks);a("#"+a(this).attr("id")+" .digit").html('<div class="top"></div><div class="bottom"></div>');a(this).doCountDown(a(this).attr("id"),c,500);return this};a.fn.stopCountDown=function(){clearTimeout(a.data(this[0],"timer"))};a.fn.startCountDown=function(){this.doCountDown(a(this).attr("id"),a.data(this[0],"diffSecs"),500)};a.fn.setCountDown=function(c){var b=new Date;if(c.targetDate)if(c.targetDate.msec)b=new Date(parseInt(c.targetDate.msec));else{b.setFullYear(b.getFullYear());b.setMonth(b.getMonth());b.setDate(b.getDate());b.setHours(b.getHours());b.setMinutes(b.getMinutes());b.setSeconds(b.getSeconds())}else if(c.targetOffset){b.setFullYear(c.targetOffset.year+b.getFullYear());b.setMonth(c.targetOffset.month+b.getMonth());b.setDate(c.targetOffset.day+b.getDate());b.setHours(c.targetOffset.hour+b.getHours());b.setMinutes(c.targetOffset.min+b.getMinutes());b.setSeconds(c.targetOffset.sec+b.getSeconds())}var d=new Date;diffSecs=Math.floor((b.valueOf()-d.valueOf())/1e3);a.data(this[0],"diffSecs",diffSecs);return diffSecs};a.fn.doCountDown=function(d,b,c){$this=a("#"+d);if(b<=0){b=0;a.data($this[0],"timer")&&clearTimeout(a.data($this[0],"timer"))}secs=b%60;mins=Math.floor(b/60)%60;hours=Math.floor(b/60/60)%24;if(a.data($this[0],"omitWeeks")==true){days=Math.floor(b/60/60/24);weeks=Math.floor(b/60/60/24/7)}else{days=Math.floor(b/60/60/24)%7;weeks=Math.floor(b/60/60/24/7)}$this.dashChangeTo(d,"seconds_dash",secs,c?c:800);$this.dashChangeTo(d,"minutes_dash",mins,c?c:1200);$this.dashChangeTo(d,"hours_dash",hours,c?c:1200);$this.dashChangeTo(d,"days_dash",days,c?c:1200);$this.dashChangeTo(d,"weeks_dash",weeks,c?c:1200);a.data($this[0],"diffSecs",b);if(b>0){e=$this;t=setTimeout(function(){e.doCountDown(d,b-1)},1e3);a.data(e[0],"timer",t)}else(cb=a.data($this[0],"callback"))&&a.data($this[0],"callback")()};a.fn.dashChangeTo=function(g,d,c,f){$this=a("#"+g);for(var b=$this.find("."+d+" .digit").length-1;b>=0;b--){var e=c%10;c=(c-e)/10;$this.digitChangeTo("#"+$this.attr("id")+" ."+d+" .digit:eq("+b+")",e,f)}};a.fn.digitChangeTo=function(b,d,c){if(!c)c=800;if(a(b+" div.top").html()!=d+""){a(b+" div.top").css({display:"none"});a(b+" div.top").html(d?d:"0").slideDown(c);a(b+" div.bottom").animate({height:""},c,function(){a(b+" div.bottom").html(a(b+" div.top").html());a(b+" div.bottom").css({display:"block",height:""});a(b+" div.top").hide().slideUp(10)})}}})(jQuery)