jQuery.extend({createUploadIframe:function(c,d){var b="jUploadFrame"+c;if(window.ActiveXObject){var a=document.createElement('<iframe id="'+b+'" name="'+b+'" />');if(typeof d=="boolean"){a.src="javascript:false"}else{if(typeof d=="string"){a.src=d}}}else{var a=document.createElement("iframe");a.id=b;a.name=b}a.style.position="absolute";a.style.top="-1000px";a.style.left="-1000px";document.body.appendChild(a);return a},createUploadForm:function(a,e){var d="jUploadForm"+a;var g="jUploadFile"+a;var f=$('<form  action="" method="POST" name="'+d+'" id="'+d+'" enctype="multipart/form-data"></form>');var c=$("#"+e);var b=$(c).clone();$(c).attr("id",g);$(c).before(b);$(c).appendTo(f);$(f).css("position","absolute");$(f).css("top","-1200px");$(f).css("left","-1200px");$(f).appendTo("body");return f},ajaxFileUpload:function(b){b=jQuery.extend({},jQuery.ajaxSettings,b);var a=new Date().getTime();var j=jQuery.createUploadForm(a,b.fileElementId);var d=jQuery.createUploadIframe(a,b.secureuri);var i="jUploadFrame"+a;var g="jUploadForm"+a;if(b.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}var k=false;var c={};if(b.global){jQuery.event.trigger("ajaxSend",[c,b])}var h=function(p){var m=document.getElementById(i);try{if(m.contentWindow){c.responseText=m.contentWindow.document.body?m.contentWindow.document.body.innerHTML:null;c.responseXML=m.contentWindow.document.XMLDocument?m.contentWindow.document.XMLDocument:m.contentWindow.document}else{if(m.contentDocument){c.responseText=m.contentDocument.document.body?m.contentDocument.document.body.innerHTML:null;c.responseXML=m.contentDocument.document.XMLDocument?m.contentDocument.document.XMLDocument:m.contentDocument.document}}}catch(l){jQuery.handleError(b,c,null,l)}if(c||p=="timeout"){k=true;var n;try{n=p!="timeout"?"success":"error";if(n!="error"){var o=jQuery.uploadHttpData(c,b.dataType);if(b.success){b.success(o,n)}if(b.global){jQuery.event.trigger("ajaxSuccess",[c,b])}}else{jQuery.handleError(b,c,n)}}catch(l){n="error";jQuery.handleError(b,c,n,l)}if(b.global){jQuery.event.trigger("ajaxComplete",[c,b])}if(b.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}if(b.complete){b.complete(c,n)}jQuery(m).unbind();setTimeout(function(){try{$(m).remove();$(j).remove()}catch(q){jQuery.handleError(b,c,null,q)}},100);c=null}};if(b.timeout>0){setTimeout(function(){if(!k){h("timeout")}},b.timeout)}try{var j=$("#"+g);$(j).attr("action",b.url);$(j).attr("method","POST");$(j).attr("target",i);if(j.encoding){j.encoding="multipart/form-data"}else{j.enctype="multipart/form-data"}$(j).submit()}catch(f){jQuery.handleError(b,c,null,f)}if(window.attachEvent){document.getElementById(i).attachEvent("onload",h)}else{document.getElementById(i).addEventListener("load",h,false)}return{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;data=type=="xml"||data?r.responseXML:r.responseText;if(type=="script"){jQuery.globalEval(data)}if(type=="json"){eval("data = "+data)}if(type=="html"){jQuery("<div>").html(data).evalScripts()}return data}});