// Set var for no. of active timers
function validate(e,t){$.getJSON("validator-proxy.php",{uri:t},function(n){$("#loading"+e).html('<a href="http://validator.w3.org/check?uri='+encodeURIComponent(t)+'" target="_blank" style="color:'+(n.valid=="Passed"?"#006400":"#B00")+'">'+(n.valid||n.error)+"</a>");activeTimers--;checkTimers()})}function checkTimers(){if(activeTimers<1){$("input[type=submit]").removeAttr("disabled");clearInterval(timerIntervalId)}}var activeTimers=0,timerIntervalId=0;$(document).ready(function(){$("#validator").submit(function(){$("input[type=submit]").prop("disabled",!0);$("#results").html('<tr><td class="c" colspan="3">Processing sitemap...<br /><img src="http://cdn.ole.michelsen.dk/images/ajax-loader.gif" height="11" width="16" /></td></tr>');$.getJSON("validator-sitemap.php",{uri:$("#sitemapuri").val()},function(e){if(e.length>0){var t=2e3,n="",r=1e3;$.each(e,function(e,i){n+="<tr"+(e%2==1?' class="alt">':">")+'<td class="r">'+(e+1)+":</td>"+"<td>"+i+"</td>"+'<td class="c" id="loading'+e+'">'+(e<r?'<img src="http://cdn.ole.michelsen.dk/images/ajax-loader.gif" height="11" width="16" />':"Deferred")+"</td></tr>";if(e<r){setTimeout("validate("+e+", '"+i+"')",t*e);activeTimers++}});$("#results").html(n)}else{$("#results td:first").html('<span style="color:#B00">Sitemap could not be parsed - wrong URI?</span>');$("input[type=submit]").prop("disabled",!1)}});return!1})});